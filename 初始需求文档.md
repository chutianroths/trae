
# **皮肤医生应用产品需求文档 (PRD)**

## **1\. 项目概述**

“皮肤医生”应用（SkinDoc）通过基于人工智能的解决方案，为用户提供个性化的皮肤分析、产品推荐和护肤建议。用户通过上传面部照片，应用会识别皮肤问题（如痘痘、斑点等）并提供相关建议。

## **2\. 目标与核心功能**

### **2.1 核心功能**

1. **照片上传与实时拍照**
   - 支持上传本地图片或拍照上传。
   - 自动检测图片质量（如光线、清晰度、分辨率和焦距），并反馈给用户，如果图像不符合标准，提供重新上传的提示。

2. **AI皮肤分析**
   - 通过调用 Google Gemini API，使用 `gemini-2.5-flash-preview-05-20` 模型进行皮肤问题的视觉分析。
   - 自动识别痘痘、斑点、油性、干燥等皮肤问题。
   - 返回识别结果及分析置信度，帮助用户了解结果的可靠性。
   - 提供皮肤问题分析结果的置信度评分（如：>0.7表示可信）。

3. **语音合成功能**
   - 通过 `gemini-2.5-flash-preview-tts` 模型，提供语音合成功能，使用户能够听到皮肤分析和建议的朗读内容。
   - 提供多语言支持（中文、英文等），并允许用户选择语音风格（男声或女声），同时支持音量和语速的调整。

4. **个性化产品推荐**
   - 根据皮肤分析结果，结合用户上传的护肤产品清单，智能推荐合适的产品。
   - 推荐算法会考虑不同皮肤问题的优先级、用户的肤质、产品的成分和适用情况。

5. **护肤建议生成**
   - 基于用户皮肤状况生成饮食和护肤建议，帮助用户改善皮肤健康。

6. **结果朗读功能**
   - 提供语音朗读功能，帮助用户更便捷地获取分析结果。

7. **历史记录管理**
   - 存储用户的历史分析记录，允许用户查看过去的皮肤问题分析和产品推荐。

### **2.2 用户界面 (UI) 设计**

- **简洁直观的主界面**：上传区、拍照区和分析结果展示区域。
- **进度指示**：在图片分析过程中显示加载状态和分析进度。
- **响应式设计**：确保在不同设备和分辨率下，界面能流畅显示。

## **3\. 技术要求与架构**

### **3.1 技术栈**

- **前端框架**：React，确保组件化的开发，便于UI的扩展和维护。
- **桌面应用框架**：Electron，跨平台支持Windows、macOS和Linux。
- **AI模型**：通过 `fetch` 请求调用 Google Gemini API，使用 `gemini-2.5-flash-preview-05-20` 模型进行视觉分析，`gemini-2.5-flash-preview-tts` 模型进行语音合成。
- **后端架构**：Python + FastAPI，使用SQLite和SQLAlchemy处理数据和API请求。

### **3.2 API接口设计**

#### **图像分析接口**

- **接口路径**：`/api/v1/analyze`
- **请求方式**：POST
- **请求示例**：
  ```json
  {
    "image": "base64_encoded_image",
    "metadata": {
      "age": 25,
      "skin_type": "mixed"
    }
  }
  ```

- **响应示例**：
  ```json
  {
    "status": "success",
    "results": [
      {
        "type": "acne",
        "confidence": 0.85,
        "location": [[x1, y1], [x2, y2]],
        "suggestions": ["温和清洁", "控油"]
      }
    ],
    "recommendations": [
      {
        "product": "洁面乳A",
        "reason": "适合痘痘肌"
      }
    ]
  }
  ```

#### **错误码定义**

- **200**：成功
- **400**：请求参数错误
- **401**：未授权
- **500**：服务器内部错误

### **3.3 数据需求**

- **数据来源**：公开数据集（如ISIC）、志愿者数据、内部采集。
- **标注规范**：痘痘、色斑、正常皮肤，以及确保数据多样性，包括不同肤色、性别和年龄段的样本。
- **置信度标准**：置信度大于0.7的结果才会展示。

## **4\. 开发进度**

### **第一阶段：基础架构搭建**
- 创建项目结构，设置FastAPI和SQLite数据库。

### **第二阶段：图像处理功能**
- 实现图片上传和实时拍照功能。
- 开发图像质量检测功能，确保图像符合分析标准。

### **第三阶段：AI模型集成**
- 集成Google Gemini API，使用 `gemini-2.5-flash-preview-05-20` 模型进行皮肤问题识别。
- 集成 `gemini-2.5-flash-preview-tts` 模型进行语音合成。

### **第四阶段：推荐系统**
- 根据皮肤问题和产品清单生成个性化的产品推荐。
- 生成具体护肤建议，并在API响应中返回。

### **第五阶段：前端开发**
- 开发图片上传、实时拍照及结果展示页面。
- 实现用户反馈和历史记录管理功能。

### **第六阶段：测试和优化**
- 进行单元测试、集成测试，修复潜在的Bug。
- 性能优化，确保应用在多平台上稳定运行。

## **5\. 用户需求与体验**

- **个性化推荐**：根据用户皮肤状况、年龄、肤质等个性化定制护肤产品和建议。
- **图像分析**：增强AI模型的准确性，避免误判，确保皮肤问题的精确识别。
- **用户界面**：简洁直观，符合用户使用习惯，减少操作复杂度。

## **6\. 数据隐私与安全**

- 用户上传的照片和个人信息将加密处理，确保数据安全。
- 遵循GDPR等隐私保护法律，确保用户数据不被滥用。
